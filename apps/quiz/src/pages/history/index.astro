---
import QuizList from "../../components/QuizList";
import Layout from "../../layouts/Layout.astro";
import { supabase } from "../../lib/supabase";

const { data: quizzes, error } = await supabase
  .from("quizzes")
  .select("id, date, questions")
  .order("date", { ascending: false });
---

<Layout
  title="Quiz Archive"
  description="Explore our archive of daily trivia quizzes. Hundreds of past quizzes covering general knowledge, history, science, geography, and more. Play any day you missed."
  canonicalUrl="https://quiz.cosmic.garden/history"
>
  <h1 class="text-3xl font-bold text-quiz-text mb-2">Quiz Archive</h1>
  <p class="text-quiz-text-muted mb-8">Browse and play past daily quizzes</p>

  {
    error || !quizzes || quizzes.length === 0 ? (
      <div class="text-center py-12">
        <p class="text-quiz-text-muted">No quizzes available yet.</p>
      </div>
    ) : (
      <QuizList quizzes={quizzes} client:load />
    )
  }
</Layout>
